\chapter{Types and Proof Assistants}

\section{What are proof assistants?}
Proof assistants are a special kind of computer program whose job
is to verify the correctness of a mathematical proof, that is,
verify if a conclusion can be made by applying a fixed set
of logical deduction steps on a set of fixed assumptions. Modern 
implementations of proof assistants usually utilizes theories such as 
Higher Order Logic (eg. Isabelle, HOL Light), or some form of Type Theory.

In order to have a computer program that can do such powerful logical
reasoning to contain sophisticated mathematical results, the first 
question that arises is how to represent a theorem and what qualifies
as a valid proof of a theorem. Fortunately, Type Theory gives a simple
and direct relationship between Logic and Types.

\section{Type Theory}

Types were first invented by Bertrand Russell as a way to provide higher-order
structures than sets to overcome his famous Russell's paradox. However, it was
Alonzo's Church's Lambda Calculus which when used with types (Simply Typed
Lambda Calculus) exhibited many desirable properties as not just a consistent
formal system, also as a rewriting system that exhibits strong normalization.
The arguably most important characteristic of Type Theories to qualify as a 
useful theory for the implementation of proof assistants, lies in the
Curry-Howard Correspondence.

\section{The Curry-Howard Correspondence}

The Curry-Howard Correspondence establishes an one-to-one correspondence between
two distinct disciplines --- Logic and Types. It asserts that there is a
one-to-one correspondences between Types and Propositions, and between Terms and
Proofs. More precisely, it states that every proposition in intuitionistic
propositional logic (constructive 0-th order logic) can be expressed as a Type
in Simply Typed Lambda Calculus, and correspondingly, a term of a specific type
is viewed as a proof for the proposition represented by the type.

\begin{tabular}{c|c}
Intuitioinistic Propositional Logic & Type Theory\\
\hline
Proposition & Type\\
Proof & Term
\end{tabular}

What are those exactly?

\subsection{Intuitionistic Propositional Logic}

Propositional logic, also known as \emph{0-th order logic} is a logical system
where propositions (sentences) are constructed with variables and logical
connectors, such as $\to$ (implication), $\vee$ (disjuction), $\neg$ (negation),
$\wedge$ (conjunction) and more. For example, propositions in Proprositional
logic looks like:

\begin{enumerate}
    \item $p\vee q$
    \item $p\wedge \neg p$
    \item $(p\to q)\to (\neg q\to\neg p)$
\end{enumerate}

One can assign a valuation to each variable, either $1$ or $0$, which represents
"True" or "False" informally. If there is some valuation that result in the
propostion result in $1$, then we say the proposition is \emph{satisfiable}; if 
there is none, i.e. all valuations will result in the proposition being $0$, 
we say the proposition is a \emph{contradiction}; on the other hand, if any 
valuation will result in $1$, the proposition is a \emph{tautology}.

In particular, in the above example, the propositions are satisfiable, a
contradiction and a tautology in that order.

Logical systems can be either intuitionistic or classical, based on one fact:
whether they accept the \emph{rule of the excluded middle}. Precisely, it says

\newtheorem{axiom}{Axiom}[section]
\begin{axiom}[Excluded Middle]
    For any proposition $p$, either $p$ or $\neg p$ holds.
\end{axiom}

Much of modern mathematics is built on classical logic, which asserts the axiom
of excluded middle. This leads to the existence of multitude of non-constructive 
proofs, which shows existence without giving a witness. A classical
non-constructive proof using the law of excluded middle is as follows:

\begin{theorem}
There exists irrational numbers $a, b$ where $a^b$ is rational.
\end{theorem}
\begin{proof}
By the law of excluded middle, $\sqrt{2}^{\sqrt{2}}$ is either rational or
irrational. 
    
Suppose it is rational, then take $a=b=\sqrt{2}$. We have found such $a,b$.

Suppose it is irrational, then take $a=\sqrt{2}^{\sqrt{2}}$, $b=\sqrt{2}$. Then
\[a^b={\left(\sqrt{2}^{\sqrt{2}}\right)}^{\sqrt{2}}=\sqrt{2}^{\sqrt{2}\times\sqrt{2}}=2\]
is rational.
\end{proof}

Even with the proof, we still don't have a concrete pair of irrational numbers
$(a,b)$ fulfilling the property, but the conclusion is declared to be logically
sound.

Intuitionistic logic, on the other hand, rejects this rule, leading to a logical
system where to prove something exists, it requires an algorithm for the
explicit construction of such object.

\subsection{Simply Typed Lambda Calculus}

The Simply Typed Lambda Calculus (STLC) is a simple construction:

\subsection{The Correspondence}
This correspondence is two-way: in particular, we can encode
a proposition as a type, and to write a proof is equivalent to 
finding a term that inhabit that particular type. This reduced the
problem of proof-checking to the problem of finding the type of a term,
or under the Curry-Howard correspondence, whether a proof truly proves
a given proposition.

This fundamental correspondence is elegant, but only limited to 
propositional logic. More complex type systems, such as the
Calculus of Constructions by Theiry Coquand, extend the Curry-Howard
correspondence to higher-order logic, finally allowing the encoding of
most mathematical truth and specifying proofs for theories in those 
systems.

\section{The Coq Proof Assistant}

The Coq Proof Assistant (or Coq for short) is a proof assistant 
based on the Calculus of Inductive Constructions, which added
co-inductive types into the Calculus of Constructions.